<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Frequently asked questions (FAQ) &#8212; WESTPA 1.0b1 documentation</title>
    
    <link rel="stylesheet" href="../static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0b1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="WESTPA 1.0b1 documentation" href="../sphinx_index.html" />
   
  <link rel="stylesheet" href="../static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="frequently-asked-questions-faq">
<h1>Frequently asked questions (FAQ)<a class="headerlink" href="#frequently-asked-questions-faq" title="Permalink to this headline">¶</a></h1>
<div class="section" id="simulation">
<h2>Simulation<a class="headerlink" href="#simulation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>How can I cleanly shutdown a simulation (without corrupting the h5
file)?</li>
</ul>
<p>It is generally safe to shutdown a WESTPA simulation by simply canceling
the job through your queue management. However, to ensure data integrity
in the h5 file, you should wait until the WESTPA log indicates that an
iteration has begun or is occurring; canceling a job too quickly after
submission can result in the absolute corruption of the h5 file and
should be avoided.</p>
<ul class="simple">
<li>Storage of Large Files</li>
</ul>
<p>During a normal WESTPA run, many small files are created and it is
convenient to tar these into a larger file (one tarball per iteration,
for instance). It is generally best to do this &#8216;offline&#8217;. An important
aspect to consider is that some disk systems, such as LUSTRE, will
suffer impaired performance if very large files are created. On
Stampede, for instance, any file larger than 200 GB must be &#8216;striped&#8217;
properly (such that its individual bits are spread across numerous
disks).</p>
<p>Within the user guide for such systems, there is generally a section on
how to handle large files. Some computers have special versions of tar
which stripe appropriately; others do not (such as Stampede). For those
that do not, it may be necessary to contact the sysadmin, and/or create
a directory where you can place your tarball with a different stripe
level than the default.</p>
<ul class="simple">
<li>H5py Inflate() Failed error</li>
</ul>
<p>While running or analyzing a simulation, you may run into an error such
as <code class="docutils literal"><span class="pre">IOError:</span> <span class="pre">Can't</span> <span class="pre">write</span> <span class="pre">data</span> <span class="pre">(Inflate()</span> <span class="pre">failed)</span></code>. These errors may be
related to an open bug in H5py. However, the following tips may help you
to find a workaround.</p>
<p>WESTPA may present you with such an error when unable to read or write a
data set. In the case that a simulation gives this error when you
attempt to run it, it may be helpful to check if a data set may be read
or written to using an interactive Python session. Restarting the
simulation may require deleting and remaking the data set. Also, this
error may be related to compression and other storage options. Thus, it
may be helpful to disable compression and chunked storage. Note that
existing datasets will retain compression and other options given to
them at the time of their creation, so it may be necessary to truncate
an iteration (for example, using <code class="docutils literal"><span class="pre">w_truncate</span></code>) in order for changes to
take effect.</p>
<p>This error may also occur during repeated opening (e.g., 1000s of times)
of an HDF5 data set. Thus, this error may occur while running analysis
scripts. In this case, it may be helpful to cache data sets in physical
memory (RAM) as <code class="docutils literal"><span class="pre">numpy</span></code> arrays when they are read, so that the script
loads the dataset a minimal number of times.</p>
<ul class="simple">
<li>Dynamics Packages</li>
</ul>
<p>WESTPA was designed to work cleanly with any dynamics package available
(using the executable propagator); however, many of the tips and tricks
available on the web or the user manual for these packages make the
(reasonable) assumption that you will be running a set of brute force
trajectories. As such, some of their guidelines for handling periodic
boundary conditions may not be applicable.</p>
<ul class="simple">
<li>How can I restart a WESTPA simulation?</li>
</ul>
<p>In general restarting a westpa simulation will restart an incomplete
iteration, retaining data from segments that have completed and
re-running segments that were incomplete (or never started).</p>
<p>In case that the iteration data got corrupted or you want to go
back to an specific iteration and change something, you need to
delete all the trajectory secgments and other files related to that
iteration and run w_truncate on that iteration. This will delete westpa&#8217;s
information about the nth iteration, which includes which segments have
run and which have not. Then restarting your westpa simulation will
restart that iteration afresh.</p>
</div>
<div class="section" id="gromacs">
<h2>GROMACS<a class="headerlink" href="#gromacs" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Periodic Boundary Conditions</li>
</ul>
<p>While many of the built in tools now handle periodic boundary conditions
cleanly (such as g_dist) with relatively little user interaction,
others, such as g_rms, do not. If your simulation analysis protocol
requires you to run such a tool, you must correct for the periodic
boundary conditions before running it. While there are guidelines
available to help you correct for whatever conditions your system may
have
<a class="reference external" href="http://www.gromacs.org/Documentation/Terminology/Periodic_Boundary_Conditions">here</a>,
there is an implicit assumption that you have one long running
trajectory.</p>
<p>It will be necessary, within your executable propagator (usually
runseg.sh) to run trjconv (typically, two or three times, depending on
your needs: once to remove the periodic boundary conditions, then to
make molecules whole, then to remove any jumps). If no extra input is
supplied (the -s flag in GROMACS 4.X), GROMACS uses the first frame of
your segment trajectory as a reference state to remove jumps. If your
segment&#8217;s parent ended the previous iteration having jumped across the
box barrier, trjconv will erroneously assume this is the correct state
and &#8216;correct&#8217; any jump back across the barrier. <strong>This can result in
unusually high RMSD values for one segment for one or more iterations,</strong>
and can show as discontinuities on the probability distribution. It is
important to note that a lack of discontinuities does not imply a lack
of imaging problems.</p>
<p>To fix this, simply pass in the last frame of the imaged parent
trajectory and use that as the reference structure for trjconv. This
will ensure that trjconv is aware if your segment has crossed the
barrier at time 0 and will make the appropriate corrections.</p>
</div>
<div class="section" id="development">
<h2>Development<a class="headerlink" href="#development" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="first docutils">
<dt>I&#8217;m trying to profile a parallel script using the &#8211;profile</dt>
<dd>option of bin/west. I get a PicklingError. What gives?</dd>
</dl>
</li>
</ul>
<p>When executing a script using &#8211;profile, the following error may crop
up:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">PicklingError</span><span class="p">:</span> <span class="n">Can</span><span class="s1">&#39;t pickle &lt;type &#39;</span><span class="n">function</span><span class="s1">&#39;&gt;: attribute lookup __builtin__.function failed</span>
</pre></div>
</div>
<p>The cProfile module used by the &#8211;profile option modifies function
definitions such that they are no longer pickleable, meaning that they
cannot be passed through the work manager to other processes. If you
absolutely must profile a parallel script, use the threads work manager.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../sphinx_index.html">
              <img class="logo" src="../static/WESTPA2b.svg" alt="Logo"/>
            </a></p>
  <h3><a href="../sphinx_index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Frequently asked questions (FAQ)</a><ul>
<li><a class="reference internal" href="#simulation">Simulation</a></li>
<li><a class="reference internal" href="#gromacs">GROMACS</a></li>
<li><a class="reference internal" href="#development">Development</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../sphinx_index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../sources/users_guide/faq.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Matthew C. Zwier and Lillian T. Chong.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.9</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../sources/users_guide/faq.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>